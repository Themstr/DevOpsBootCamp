# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

tasks:
  - name: Adding eclipse jdk GPG key
    init: wget -O - https://packages.adoptium.net/artifactory/api/gpg/key/public | sudo apt-key add -
  - name: Adding eclipse jdk ubuntu repository
    init: echo "deb https://packages.adoptium.net/artifactory/deb $(awk -F= '/^VERSION_CODENAME/{print$2}' /etc/os-release) main" | sudo tee /etc/apt/sources.list.d/adoptium.list
  - name: Adding Jenkins key
    init: curl -fsSL https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo tee /usr/share/keyrings/jenkins-keyring.asc > /dev/null
  - name: Adding jenkins repository
    init: echo deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] https://pkg.jenkins.io/debian-stable binary/ | sudo tee /etc/apt/sources.list.d/jenkins.list > /dev/null
  - name: updating and syncing new repos
    init: sudo apt update
  - name: Installing eclipse jdk 11 / jenkins
    init: sudo apt install temurin-11-jdk jenkins
  - name: updating java config
    init: sudo update-alternatives --config java
  - name: Starting Jenkins service
    init: sudo service jenkins start
  - name: Disable Docker Permission Denied
    init: sudo chmod 666 /var/run/docker.sock
  - name: Running Sonarqube
    init: docker run -d -p 9000:9000 -v sonarqube_conf:/opt/sonarqube/sconf -v sonarqube_extensions/opt/sonarqube/extensions -v sonarqube_logs:/opt/sonarqube/logs -v sonarqube_data:/opt/sonarqube/data sonarqube






